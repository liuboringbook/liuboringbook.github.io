<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>静态博客访问优化之终极解决方案 | 无聊才读书-博客</title><meta name="description" content="前言 首先本教程是基于 域名已经备案 的前提下进行的，理论上，任何静态页面都可以使用本教程，哪怕是你写的一个小demo网页，想show给别人看，也可以使用，前提是域名已经备案。域名没有备案的也不要灰心，这里我给出三个解决方案： 一、就是去备案（这不废话吗？）备案一般必须要有域名服务商的服务器才行，而买服务器又得花很多钱。（我们玩Hexo的口号是什么？白嫖！）那么没服务器怎么办呢？——备案授权码！上"><meta name="keywords" content="Vue,面试,ES6,webpack,node,前端"><meta name="author" content="刘如刚"><meta name="copyright" content="刘如刚"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://blog.liurugang.cn/posts/57538/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="preconnect" href="//zz.bdstatic.com"/><meta property="og:type" content="article"><meta property="og:title" content="静态博客访问优化之终极解决方案"><meta property="og:url" content="http://blog.liurugang.cn/posts/57538/"><meta property="og:site_name" content="无聊才读书-博客"><meta property="og:description" content="前言 首先本教程是基于 域名已经备案 的前提下进行的，理论上，任何静态页面都可以使用本教程，哪怕是你写的一个小demo网页，想show给别人看，也可以使用，前提是域名已经备案。域名没有备案的也不要灰心，这里我给出三个解决方案： 一、就是去备案（这不废话吗？）备案一般必须要有域名服务商的服务器才行，而买服务器又得花很多钱。（我们玩Hexo的口号是什么？白嫖！）那么没服务器怎么办呢？——备案授权码！上"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2021-01-20T08:16:31.499Z"><meta property="article:modified_time" content="2021-01-20T08:19:44.776Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="prev" title="webpack(1)" href="http://blog.liurugang.cn/posts/36438/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":500,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: true,
  Snackbar: {"bookmark":{"message_prev":"按","message_next":"键将本页加入书签"},"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-left"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2021-01-20 16:19:44'
}</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sviptzk/HexoStaticFile@master/Hexo/css/flink.min.css"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="https://cdn.jsdelivr.net/gh/Chocolate1999/cdn/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">25</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#核心方案"><span class="toc-number">2.</span> <span class="toc-text">核心方案</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#科普"><span class="toc-number">3.</span> <span class="toc-text">科普</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#各云服务商的价格对比"><span class="toc-number">4.</span> <span class="toc-text">各云服务商的价格对比</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#阿里云"><span class="toc-number">4.1.</span> <span class="toc-text">阿里云</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#腾讯云"><span class="toc-number">4.2.</span> <span class="toc-text">腾讯云</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#七牛云"><span class="toc-number">4.3.</span> <span class="toc-text">七牛云</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#总结"><span class="toc-number">4.4.</span> <span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#具体配置"><span class="toc-number">5.</span> <span class="toc-text">具体配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#创建存储桶"><span class="toc-number">5.1.</span> <span class="toc-text">创建存储桶</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#上传文件到COS中"><span class="toc-number">5.2.</span> <span class="toc-text">上传文件到COS中</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#开启pages服务"><span class="toc-number">5.3.</span> <span class="toc-text">开启pages服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#绑定域名并开启CDN"><span class="toc-number">5.4.</span> <span class="toc-text">绑定域名并开启CDN</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#配置HTTPS证书"><span class="toc-number">5.5.</span> <span class="toc-text">配置HTTPS证书</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#刷新CDN缓存"><span class="toc-number">5.6.</span> <span class="toc-text">刷新CDN缓存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结-1"><span class="toc-number">6.</span> <span class="toc-text">总结</span></a></li></ol></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">无聊才读书-博客</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 媒体</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/bangumis/"><i class="fa-fw fab fa-youtube"></i><span> 番剧</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li><li><a class="site-page" href="/books/"><i class="fa-fw fas fa-book"></i><span> 书单</span></a></li><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li></ul></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-heartbeat"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/gallery/"><i class="fa-fw far fa-image"></i><span> 相册</span></a></li><li><a class="site-page" href="/home/"><i class="fa-fw fab fa-phoenix-framework"></i><span> 主页</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/contact/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">静态博客访问优化之终极解决方案</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2021-01-20 16:16:31"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2021-01-20</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2021-01-20 16:19:44"><i class="fas fa-history fa-fw"></i> 更新于 2021-01-20</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><hr>
<p>首先本教程是基于 <strong>域名已经备案</strong> 的前提下进行的，理论上，任何静态页面都可以使用本教程，哪怕是你写的一个小demo网页，想show给别人看，也可以使用，前提是<strong>域名已经备案</strong>。<br>域名没有备案的也不要灰心，这里我给出<strong>三个解决方案</strong>：</p>
<p><strong>一、就是去备案</strong>（这不废话吗？）<br>备案一般必须要有域名服务商的服务器才行，而买服务器又得花很多钱。<br>（我们玩Hexo的口号是什么？白嫖！）<br>那么没服务器怎么办呢？<br>——备案授权码！<br>上哪搞呢？<br>鲁迅曾经说过：有需求的地方，必有市场！<br>（鲁迅：没错，什么都是我说的！）<br>这就得靠我们强大的某淘了，给个关键字：XXX云服务号</p>
<p><strong>二、就是不备案</strong><br>强行推广一波我的另一篇优化文章，一样可以获得很高的访问速度：<a href="https://blog.sky03.cn/2019/42790.html" target="_blank" rel="noopener">Hexo博客优化</a></p>
<p><strong>三、使用国外的云服务</strong></p>
<p>备案是“中国特色”，国外的服务器是没有备案一说的。可以尝试 谷歌云 或者 亚马逊的AWS，这里不做过多介绍。</p>
<h2 id="核心方案"><a href="#核心方案" class="headerlink" title="核心方案"></a>核心方案</h2><p>开门见山的说，今天的主角：<code>对象存储 + CDN</code>。</p>
<p>方案其实就是将自己的静态网页文件放到云服务商提供的 <code>对象存储</code> 中，而 <code>对象存储</code> 一般提供的都有pages服务，而且访问速度绝对要远比代码托管平台提供的pages服务快的多，但是这个pages服务，一般只有绑定了域名才可以开启，而且也只能绑定已备案的域名，最重要的是我们还可以使用云服务商提供的<code>CDN</code>，这样又进一步提升了访问速度，这绝对碾压代码托管平台的pages服务，任你再怎么优化也是没有对象存储快的，更何况还有CDN（付费的当然比免费的好用）。</p>
<p>这个方案的好处是：用远低于购买服务器的价格，就可以获得服务器级别甚至更强的访问性能！</p>
<p>其实会玩的人看到这里，就已经明白怎么搞了，但是为了很多小白我还要再啰嗦一下。</p>
<h2 id="科普"><a href="#科普" class="headerlink" title="科普"></a>科普</h2><blockquote>
<p>再讲解具体步骤之前，让我们先了解一些基础概念，以便有更好地阅读体验，大佬请忽略</p>
</blockquote>
<p><code>对象存储</code>：即每个文件都是一个对象， 所有的文件实际是都是在同一个文件夹内，只不过其前缀不同罢了，如果不能理解，就当是一个存储文件的网盘吧。</p>
<p><code>CDN</code>： 全称Content Delivery Network即<code>内容分发网络</code>。 CDN加速意思就是在用户和我们的服务器之间加一个缓存机制，通过这个缓存机制动态获取IP地址根据地理位置，让用户到最近的服务器访问，从而可以得到更快的访问速度。</p>
<p><code>源站</code>：即真正存储网站的服务器。（这里指的是我们的对象存储服务器）</p>
<p><code>回源</code>： 是指CDN服务器缓存的资源过期后，从<code>源站</code>获取最新的访问资源，然后再缓存到CDN服务器，供下次访问</p>
<h2 id="各云服务商的价格对比"><a href="#各云服务商的价格对比" class="headerlink" title="各云服务商的价格对比"></a>各云服务商的价格对比</h2><hr>
<blockquote>
<p>云服务商有很多，大家可以根据自己的喜好选择，这里我只提供下参考，说的不对的地方请多多指正。</p>
</blockquote>
<p>可能很多人会问，说好的白嫖呢？看下价格就明白了，花不了多少钱的。</p>
<p>服务商的选择因素有很多，比如服务、价格、稳定性等，由于我本人接触云服务这方面时间较短，没什么发言权，那我就只谈谈我们这些「平民」最关心的价格这方面，做个价格对比。</p>
<p>提供对象存储的云服务商有：阿里云、腾讯云、七牛云、又拍云等。<br>考虑到各服务商的价格可能会有所变动，本节目前提供的价格参考日期为2019.11.26。</p>
<h3 id="阿里云"><a href="#阿里云" class="headerlink" title="阿里云"></a>阿里云</h3><p><a href="https://www.aliyun.com/minisite/goods?userCode=5q1oygyq" target="_blank" rel="noopener">阿里云官网</a></p>
<p>先参考阿里云官方的<a href="https://help.aliyun.com/document_detail/59636.html?source=5176.11533457&userCode=5q1oygyq&type=copy" target="_blank" rel="noopener">计量项和计费项</a>、<a href="https://www.aliyun.com/price/product?spm=a2c4g.11186623.2.15.41487b55OLtyFE#/oss/detail" target="_blank" rel="noopener">OSS计费</a> 和 <a href="https://www.aliyun.com/price/product?spm=5176.11785003.overview.23.6ff3142fZTRMFN#/cdn/detail" target="_blank" rel="noopener">CDN计费</a> 文档。</p>
<ol>
<li>CDN的计费方式有两种：按流量计费 和 按带宽峰值 计费，这里推介选择 <code>按流量计费</code>。</li>
<li>OSS计费项有很多（各种请求和以及所占容量大小的计费等，都很少，这里不做比较），对于几十M的静态博客来说：<ul>
<li>当只用 OSS 时，主要费用就是<ul>
<li><code>外网流出流量</code> 的费用！</li>
<li>00:00-08:00（闲时）：0.25元/GB</li>
<li>8:00-24:00（忙时）：0.50元/GB</li>
</ul>
</li>
<li>当使用 OSS+CDN 时，因为CDN需要到源站获取资源，就不需要从外网获取了，所以这时的费用就是<ul>
<li><code>回源流量</code> + <code>CDN流量</code>费用</li>
<li>0.15元/GB + 0.24元/GB = <code>0.39</code>元/GB</li>
</ul>
</li>
</ul>
</li>
<li>是不是很便宜？相比于购买服务器。</li>
</ol>
<h3 id="腾讯云"><a href="#腾讯云" class="headerlink" title="腾讯云"></a>腾讯云</h3><p>参考腾讯云官方文档 <a href="https://url.cn/5prc214" target="_blank" rel="noopener">对象存储COS计费</a> <a href="https://url.cn/54D7yT0" target="_blank" rel="noopener">CDN计费</a> 。</p>
<ul>
<li>当只用COS时<ul>
<li>外网下行流量费：0.5元/GB</li>
</ul>
</li>
<li>当用COS + CDN时<ul>
<li><code>回源流量</code>＋<code>CDN流量</code> = 0.15元/GB + 0.21元/GB = <code>0.36</code>元/GB</li>
</ul>
</li>
</ul>
<p>值得一说的是：腾讯云对这两个服务的新用户是有半年的优惠的。</p>
<p>COS：免费50GB 标准存储容量，6个月</p>
<p>CDN：送6个月的免费流量，每月50G，随便High！</p>
<h3 id="七牛云"><a href="#七牛云" class="headerlink" title="七牛云"></a>七牛云</h3><p><a href="https://portal.qiniu.com/signup?code=1hd1rkxh0d5jm" target="_blank" rel="noopener">七牛云官网</a></p>
<ul>
<li>七牛的对象存储10G内是免费的</li>
<li>外网流出流量费用：0.29元/GB</li>
<li>CDN回源流量费：10G内免费</li>
<li>CDN-HTTP下载流量费：10G内免费</li>
<li>CDN-HTTPS下载流量费：0.28元/GB</li>
<li>CDN-HTTP + 对象存储 = 免费</li>
<li>CDN-HTTPS + 对象存储 = 0.28元/GB</li>
<li>（因为回源10G内免费，就只剩下CDN流量费了）</li>
</ul>
<p>七牛是不是很良心？但是有次使用中，七牛的控制台竟然崩了，控制台居然都能崩掉。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>我还是比较推介大家用七牛云，当然求稳的话还是阿里云，毕竟大公司。</p>
<blockquote>
<p>我曾经看过一个关于阿里云、腾讯云、华为云的横向评测：结果就是华为云以很低的延迟和很高的带宽碾压另外两位。</p>
</blockquote>
<h2 id="具体配置"><a href="#具体配置" class="headerlink" title="具体配置"></a>具体配置</h2><blockquote>
<p>各服务商的配置大体相同，不做过多赘述，这里以腾讯云为例</p>
</blockquote>
<h3 id="创建存储桶"><a href="#创建存储桶" class="headerlink" title="创建存储桶"></a>创建存储桶</h3><ol>
<li><p>登录<a href="https://cloud.tencent.com/" target="_blank" rel="noopener">腾讯云</a>，点击右上角<code>控制台</code>，找到<code>云产品</code>，开通<code>对象存储</code>服务。</p>
</li>
<li><p><code>存储桶列表</code>-&gt;<code>创建存储桶</code>-&gt; 填写信息</p>
<ul>
<li>所属地域 选择离自己位置最近的即可（创建后不可更改）</li>
<li>访问权限 选择 <code>公有读私有写</code></li>
<li>标签 无所谓</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://blog.sky03.cn/medias/loading.gif" alt="img"></p>
</li>
</ol>
<h3 id="上传文件到COS中"><a href="#上传文件到COS中" class="headerlink" title="上传文件到COS中"></a>上传文件到COS中</h3><ol>
<li><p>继续操作，点击左侧 <code>工具</code>-&gt;<code>客户端下载</code>-&gt; 选择对象系统的 COSBrowser 下载 -&gt; 然后安装即可</p>
<p><img src= "/img/loading.gif" data-src="https://blog.sky03.cn/medias/loading.gif" alt="img"></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/fly-03/Sky03-Blog-Background/blog-img/20191129231947.png" alt="img"></p>
</li>
<li><p>点击右上角 账号 下的<code>访问管理</code>-&gt;左侧的<code>访问密钥</code></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/fly-03/Sky03-Blog-Background/blog-img/20191129232332.png" alt="img"></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/fly-03/Sky03-Blog-Background/blog-img/20191129232544.png" alt="img"></p>
</li>
<li><p>可能会有风险提示，点击<code>继续使用</code></p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/fly-03/Sky03-Blog-Background/blog-img/20191129233118.png" alt="img"></p>
</li>
<li><p>复制 <code>SecretId</code> 和 <code>SecretKey</code> 这两个是读写COS的密钥，不能泄露！</p>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/fly-03/Sky03-Blog-Background/blog-img/20191129233531.png" alt="img"></p>
</li>
<li><p>打开 COSBrowser，输入刚才复制的两个值，点击 <code>登录</code>。</p>
</li>
<li><p>在 COSBrowser中，左下角点击 <code>同步</code></p>
<ul>
<li>本地文件夹选择 <code>Hexo根目录</code>中的<code>public</code>文件夹</li>
<li>（public文件夹中的文件为Hexo生成的静态网页文件，我们需要将这些文件放到COS中，供别人访问；git部署的文件也是这些文件！）</li>
<li>存储桶目录选择刚才创建的存储桶，存储桶目录留空（目的：将public文件夹中的文件上传到存储桶的根目录）</li>
<li>点击 <code>开始同步</code></li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/fly-03/Sky03-Blog-Background/blog-img/20191129235249.png" alt="img"></p>
</li>
<li><p>之后可以到网页版的控制台确认文件有没有上传上去。</p>
</li>
</ol>
<h3 id="开启pages服务"><a href="#开启pages服务" class="headerlink" title="开启pages服务"></a>开启pages服务</h3><ol>
<li>回到控制台，<code>对象存储</code> -&gt; <code>存储桶列表</code> -&gt; <code>基础配置</code> -&gt; <code>静态网站</code> -&gt; <code>开启</code></li>
<li>访问节点：即 该COS的访问地址</li>
<li>强制 HTTPS：建议开启</li>
<li>索引文档（主页）：填 <code>index.html</code></li>
<li>错误文档（404页面）：如果有404页面填上404页面的地址，如果没有留空即可。</li>
<li>重定向规则：设置发生4XX错误时，要填跳转到哪个页面，可以不配置。</li>
<li>保存</li>
</ol>
<p><img src= "/img/loading.gif" data-src="https://cdn.jsdelivr.net/gh/fly-03/Sky03-Blog-Background/blog-img/20191130003331.png" alt="img"></p>
<p>之后就可以直接复制 访问节点 的地址到浏览器打开，看能不能访问。</p>
<h3 id="绑定域名并开启CDN"><a href="#绑定域名并开启CDN" class="headerlink" title="绑定域名并开启CDN"></a>绑定域名并开启CDN</h3><ol>
<li><p><code>对象存储</code> -&gt; <code>存储桶列表</code> -&gt; 点击刚才创建的存储桶 -&gt; 点击 <code>域名管理</code></p>
</li>
<li><p>找到 自定义域名加速，点击<code>添加域名</code>（只能添加已备案的域名）</p>
<ul>
<li>域名：你的域名（将此域名添加到域名解析那里）</li>
<li>加速地域：国内加速</li>
<li>源站类型： 静态网站源站（非常重要！！）</li>
<li>回源鉴权：不用打开（公共读不需要鉴权）</li>
<li>CDN 鉴权：不用设置</li>
<li>点击保存即可</li>
</ul>
<p><img src= "/img/loading.gif" data-src="https://images.sky03.cn/img/20200124160911.png" alt="img"></p>
</li>
<li><p>复制该项的CNAME，然后配置到域名解析那里。</p>
<p><img src= "/img/loading.gif" data-src="https://blog.sky03.cn/medias/loading.gif" alt="img"></p>
</li>
<li><p>等待部署，一般5分钟作用；部署成功后试下自己的域名能不能访问</p>
</li>
</ol>
<h3 id="配置HTTPS证书"><a href="#配置HTTPS证书" class="headerlink" title="配置HTTPS证书"></a>配置HTTPS证书</h3><p>先在域名服务商那里申请好免费https证书 （也可以在其他地方申请），这里以阿里云为例。</p>
<p>然后点击对应项的下载</p>
<p><img src= "/img/loading.gif" data-src="https://images.sky03.cn/img/20200124171707.png" alt="img"></p>
<p>选择其他</p>
<p><img src= "/img/loading.gif" data-src="https://images.sky03.cn/img/20200124171838.png" alt="img"></p>
<p>下载后的是一个压缩文件，解压后有两个文件 <code>*.pem</code> 和 <code>*.key</code>，编辑器将其打开。</p>
<p>控制台这边选择 <code>内容分发网络</code> -&gt; <code>证书管理</code> -&gt; <code>配置证书</code></p>
<ul>
<li>域名：选择刚才申请证书的域名</li>
<li>证书来源：自有证书</li>
<li>证书内容：将刚才以.pem结尾文件的内容粘进来</li>
<li>私钥内容：将以.key结尾文件的内容粘进来</li>
<li>回源协议：协议跟随</li>
<li>最后提交即可！</li>
<li>成功之后就可以使用https协议</li>
</ul>
<p>剩下的防盗链、IP访问限频配置之类的各自慢慢摸索、不配置也行。</p>
<h3 id="刷新CDN缓存"><a href="#刷新CDN缓存" class="headerlink" title="刷新CDN缓存"></a>刷新CDN缓存</h3><p><strong>为什么要刷新CDN缓存？</strong></p>
<p>因为一旦我们更新了博客的内容，而别人访问的却还是CDN节点缓存的内容，这体验就很糟糕</p>
<ol>
<li><p>如果你想刷新某个页面</p>
<p><code>内容分发网络</code> -&gt; <code>刷新预热</code> -&gt; <code>URL刷新</code> -&gt; 填入URL提交刷新即可</p>
</li>
<li><p>如果你想刷新整站内容</p>
<p>在<code>目录刷新</code>填入URL，选择刷新全部资源，提交刷新即可</p>
</li>
</ol>
<h2 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h2><p>可能很多小伙伴还有点蒙，让我们来总结一下以后的使用流程：</p>
<ol>
<li>先生成静态文件（hexo cl&amp;hexo g）</li>
<li>再将生成的文件上传到对象存储，要利用腾讯的上传软件上传</li>
<li>刷新CDN缓存（因为CDN都是有缓存的，你不刷新，别人访问的都是旧资源）</li>
</ol>
<p>但是这样总归还是有些麻烦，不过云服务商都提供了各种SDK，如果你足够牛逼，你可以手写一个一键上传脚本，并自动更新CDN缓存。如果你跟我一样是个菜鸡，那还是老老实实用服务商给的“轮子”吧。</p>
<p><strong><em>文章作者:\</em></strong> <a href="https://blog.sky03.cn/" target="_blank" rel="noopener">Sky03</a></p>
<p><strong><em>文章链接:\</em></strong> <a href="https://blog.sky03.cn/posts/1663.html" target="_blank" rel="noopener">https://blog.sky03.cn/posts/1663.html</a></p>
<p><strong><em>版权声明:\</em></strong> 本博客所有文章除特別声明外，均采用 <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="noopener">CC BY 4.0</a> 许可协议。转载请注明来源 <a href="https://blog.sky03.cn/" target="_blank" rel="noopener">Sky03</a> !</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">刘如刚</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://blog.liurugang.cn/posts/57538/">http://blog.liurugang.cn/posts/57538/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://blog.liurugang.cn" target="_blank">无聊才读书-博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-full"><a href="/posts/36438/"><img class="prev-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">webpack(1)</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021  <i id="heartbeat" class="fa fas fa-heartbeat"></i> 刘如刚</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div><head><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/HCLonely/images@master/others/heartbeat.min.css"><meta name="generator" content="Hexo 4.2.1"></head></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" type="button" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" type="button" title="缩小字体"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script><script src="/js/calendar.js"></script><script src="/js/languages.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"model":{"jsonPath":"/live2dw/assets/haruto.model.json"},"display":{"position":"right","width":120,"height":260},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body></html>